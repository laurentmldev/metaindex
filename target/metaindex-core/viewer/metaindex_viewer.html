<?xml version="1.0" encoding="utf-8"?>
<html>
<head>
<meta charset="UTF-8"/>
	<title>MetaIndex</title>
	<script type="text/javascript" src="metaindex_local.js"></script>

	  <style type="text/css">
		  body {
			background-color:#303030;
			font-family: 'Times New Roman', Georgia, Serif;
			font-size: large;
			color:#f2f2f2; 
		  }
		  
		  table, tr, td {
		  	 /*   border: solid 1px white  */
		  }

		  
		  .bordered {
		  	  border: solid 1px white;
		  	  font-size:0.8em;
		  	  border-collapse: collapse;
		  	  padding: 4px;
		  	  background-color: lightslategray;
		  }
		  th.bordered {
		  	text-align: left;
		  	background-color: gray;
		    
		  }
		  
		  fieldset {
		  	color : grey;
		  	border-color : grey;
		  	border-style : solid;
		  	font-size:0.7em;
		  	border-width:1px;
		  }
		  
		
		a,a:link {
		text-decoration : none;
		
		color:#aaa;
		}
		
		a:hover {
		color:#ccc;
		}
		
		a:active {
		color:#eee;
		}
		a {
		text-shadow: 2px 3px 3px #101010;
		-webkit-text-stroke: 1px white;
		}

		.help {
		    /* some styles to position the modal at the center of the page */
		    position: absolute;
		    top: 2%;
		    left: 10%;
		    /*width: 300px;*/
		    /*line-height: 200px;*/
		    /*height: 200px;*/
		    margin-left: 50px;
		    margin-top: 10px;
		    background-color: steelblue;
		    text-align: center;
		    border-radius: 1px;
		    display : none;
		    font-size:0.7em;
		    /* needed styles for the overlay */
		    z-index: 10; /* keep on top of other elements on the page */
		    box-shadow: 0 0 0 9999px rgba(0,0,0,0.5);
		}

	  </style>
  
</head>

<body onload="startup()" >
<center>
<!-- Help Panel -->
<div id="help_modal" class="help">
  <center>
  	<br/>
     <div style="font-size:1.2em;font-weight:bold">Recherche par Expressions Régulières</div><br/>
     Les <i>expressions régulières</i> permettent de faire des recherches avancées <br/>
       à partir d'une chaine contenant des caractères spéciaux. <br/> 
       
     <br/>
            Un tutorial détaillé ici sur <a href='http://www.codeproject.com/Articles/9099/The-Minute-Regex-Tutorial' >CodeProject</a><br/>
     <br/>
     </center>
     <table>
       	<tr><td><center>
       		<b>Les Fondamentaux</b><br/><br/>
       		<table class="bordered"  >
       			<tr><th class="bordered" >Symbole</th><th class="bordered" >Signification</th><th class="bordered" >Exemple</th><th class="bordered" >Résulat</th></tr>
       			<tr ><td class="bordered" ><b>|</b></td><td class="bordered" >OU logique</td><td class="bordered" >le (toto|tata) c'est cool</td><td class="bordered" >'le toto c'est cool' ou 'le tata c'est cool'</td></tr>
       			<tr><td class="bordered" ><b>.</b></td><td class="bordered" >n'importe quel caractère</td><td class="bordered" >t.to</td><td class="bordered" >'toto' ou 'teto' ou 'txto'</td></tr>
       			<tr><td  class="bordered" ><b>x?</b></td><td  class="bordered" >au plus une fois</td><td  class="bordered" >to?to</td><td class="bordered" >'toto' ou 'tto'</td></tr>
       			<tr><td class="bordered" ><b>x*</b></td><td class="bordered" >0, une fois ou plus</td><td class="bordered" >to*to</td><td class="bordered" >'toto' ou 'tto' ou 'tooooooto' ...</td></tr>
       			<tr><td class="bordered" ><b>x+</b></td><td class="bordered" >au moins une fois</td><td class="bordered" >to+to</td><td class="bordered" >'toto' ou 'tooooooto' ...</td></tr>
       			<tr><td class="bordered" ><b>[xyz]</b></td><td class="bordered" >un des caractères au choix</td><td class="bordered" >[abc]+</td><td class="bordered" >tous les mots formés des lettres a,b,c ('aaa', 'bac', 'bababaacaaabb',...)</td></tr>
       			<tr><td class="bordered" ><b>[^xyz]</b></td><td class="bordered" >aucun des caractères listés</td><td class="bordered" >[^eaiou]+</td><td class="bordered" >tous les mots formés exclusivement de consonnes</td></tr>
       			<tr><td class="bordered" ><b>x{n}</b></td><td class="bordered" >n fois le caractère qui précède</td><td class="bordered" >a{5}</td><td class="bordered" >aaaaa</td></tr>
       			
       		</table>
       	</center></td></tr>
       	<tr><td><center><br/>
       		<br/><b>Les Méta-Caractères</b><br/><br/>
       		<table class="bordered"  >
       			<tr><th class="bordered" >Symbole</th><th class="bordered" >Signification</th><th class="bordered" >Exemple</th><th class="bordered" >Résulat</th></tr>
       			<tr><td class="bordered" ><b>\s</b></td><td class="bordered" >un espace</td><td class="bordered" >toto\s+tata</td><td class="bordered" >'toto tata' ou 'toto &nbsp;&nbsp;&nbsp;tata' ...</td></tr>
       			<tr><td class="bordered" ><b>\S</b></td><td class="bordered" >pas un espace</td><td class="bordered" >\S+</td><td class="bordered" >un champ non vide</td></tr>
       			<tr><td class="bordered" ><b>\d</b></td><td class="bordered" >un chiffre (digit)</td><td class="bordered" >14\d\d</td><td class="bordered" >toutes les dates du 15e siècle</td></tr>
       			<tr><td class="bordered" ><b>^</b></td><td class="bordered" >le début d'une ligne</td><td class="bordered" >^toto</td><td class="bordered" >un champ qui commence par 'toto'</td></tr>
       			<tr><td class="bordered" ><b>$</b></td><td class="bordered" >la fin d'une ligne</td><td class="bordered" >^$</td><td class="bordered" >un champ strictement vide</td></tr>
       		</table>
       	</center></td></tr>
     </table>
     <br/>
     <center>
    <button id="help_okay_button" 
     onclick="document.getElementById('help_modal').style.setProperty('display','none');" >Okay</button>
  </center>
  <br/>
</div>



<b style="font-size:1.3em">MetaIndex</b>&nbsp;&nbsp;
<span style="font-size:0.4em">v1.0beta &nbsp;&nbsp;&nbsp;<button id="fullscreen" >Full Screen</button></span>
<br/>
<div id="csv" style="font-size:0.7em">
	<br/><hr/><br/> &nbsp;  Catalog File : &nbsp;<input type="file" id="fileLoad" onChange="Load()" style="width:20em;height:3em;background:#0" > 
	<br/><br/><hr/>
</div>
</center>
<div  id="main_table">

<center>

<!-- Main Table -->
<table style="width:95%"  >

<!-- Top Row (search menu) -->
<tr >
  <td colspan="2" style="text-align:right">
  <center>
    <table style="width:100%" id="filters">
      <tr><td style="font-size:0.7em;"><center><div id="CSVname" ></div></center></td></tr>
      <tr>
        <td style="font-size:0.9em;" ><center>
        	Total Workset<br/>
        	<div style="font-size:0.8em;"><span id="totalCount">0</span> Entries</div>
        		  
	  <table>
	      <tr><td><input id="downloadCSV_button" type="button" value="Download CSV" onClick="downloadCSV();" 
	      		onmouseover="document.getElementById('downloadCSV_button').style.setProperty('box-shadow','0 0 5px #BBBBBB');"
			onmouseout="document.getElementById('downloadCSV_button').style.setProperty('box-shadow','none');"/></td></tr>
          </table>
          
        </center>
        
        </td>
		
	<td>
	  <center>
	  <!-- need this table in order to pack the fieldset -->
	  <table>
	  <tr>
	  <td><img id="help_button" src="media/question.png" style="width:40px"
	  	onmouseover="document.getElementById('help_button').src='media/question_ON.png'"
		onmouseout="document.getElementById('help_button').src='media/question.png'"
		onclick="document.getElementById('help_modal').style.setProperty('display','block');"/>
	  </td>
	  <td>
	     <table><tr><td>
	  	<fieldset>
	    	  <legend>Search</legend>
		  <input type="text" id="search_field" size="30" style="font-size:1em;vertical-align='center'" onChange='checkInnerHTMLNotEmpty("search_field",DEFAULT_FILTER_SEARCH);' onkeypress="if (event.which==13||event.keycode==13) {applyFilters();}" ></input></center>
		</fieldset>
		</td></tr><tr><td><center>
		<div id="filtres_ON" style="display:none">
		  <fieldset>
		   <legend id="filtres_legend" onClick="document.getElementById('filtres_ON').style.display='none';document.getElementById('filtres_OFF').style.display='block';" 
		   		  onmouseover="document.getElementById('filtres_legend').style.setProperty('color','lightgrey');"
				  onmouseout="document.getElementById('filtres_legend').style.setProperty('color','grey');"
				  >Filters</legend>
				  
		   <table  ><tr>
			
			<td ><input type="text" id="title_filter" style="font-size:0.5em;" size="8" onChange='checkInnerHTMLNotEmpty("title_filter",DEFAULT_FILTER_TITLE);' onkeypress="if (event.which==13||event.keycode==13) {applyFilters();}"></input></td>
			<td><input type="text"  id="author_filter" size="8"    style="font-size:0.5em;" onChange='checkInnerHTMLNotEmpty("author_filter",DEFAULT_FILTER_AUTHOR)' onkeypress="if (event.which==13||event.keycode==13) {applyFilters();}"></input></td>
			<!--td><input type="text"  id="date_filter"  size="8"  style="font-size:0.5em;" onChange='checkInnerHTMLNotEmpty("date_filter",DEFAULT_FILTER_DATE)' onkeypress="if (event.which==13||event.keycode==13) {applyFilters();}"></input></td-->
			<td><input type="text"  id="museum_filter" size="8"  style="font-size:0.5em;" onChange='checkInnerHTMLNotEmpty("museum_filter",DEFAULT_FILTER_MUSEUM)' onkeypress="if (event.which==13||event.keycode==13) {applyFilters();}"></input></td>
			<td><input type="text"  id="comments_filter" size="8"  style="font-size:0.5em;" onChange='checkInnerHTMLNotEmpty("comments_filter",DEFAULT_FILTER_COMMENTS)' onkeypress="if (event.which==13||event.keycode==13) {applyFilters();}"></input></td>
			<td><input type="text" id="keywords_filter" size="8"  style="font-size:0.5em;" onChange='checkInnerHTMLNotEmpty("keywords_filter",DEFAULT_FILTER_KEYWORDS)' onkeypress="if (event.which==13||event.keycode==13) {applyFilters();}"></input></td>
			<td>
				<select id="type_filter" style="font-size:0.5em;"  onkeypress="if (event.which==13||event.keycode==13) {applyFilters();}">
					<option value="Type" DEFAULT>Type</option>
					<option value="painting" >Painting</option>
					<option value="sculpture" >Sculpture</option>
					<option value="archive" >Archive</option>
					<option value="book" >Book</option>
					<option value="object" >Art Object</option>
					<option value="autre">Other</option>
				</select>
			</td>
			<td >
					<select id="century_filter" onkeypress="if (event.which==13||event.keycode==13) {applyFilters();}" style="font-size:0.5em;" >
						<option value="century" DEFAULT>Century</option>
							<option value="11" >11th</option>
							<option value="12" >12th</option>
							<option value="13" >13th</option>
							<option value="14" >14th</option>
							<option value="15" >15th</option>
							<option value="16" >16th</option>
							<option value="17" >17th</option>
							<option value="18" >18th</option>
							<option value="19" >19th</option>
						<option value="other" >Other</option>
					</select>
			</td>
			<td >
					<select id="country_filter" onkeypress="if (event.which==13||event.keycode==13) {applyFilters();}" style="font-size:0.5em;" >
						<option value="country" >Country</option>
						<option value="france" >France</option>
						<option value="germany" >Germany</option>
						<option value="england" >England</option>
						<option value="spain" >Spain</option>
						<option value="neederlands" >Neederlands</option>
						<option value="italia" >Italy</option>
						<option value="centralEurope" >Central Europe</option>
						<option value="russia" >Russia</option>
						<option value="northernEurope" >Northern Europe</option>
						<option value="other">Other</option>
					</select>
			</td>
		   </td></tr></table>
		  </fieldset>
		</div>
		<div id="filtres_OFF" style="font-size:0.7em;color:grey" 
				onClick="document.getElementById('filtres_ON').style.display='block';document.getElementById('filtres_OFF').style.display='none';"
				  onmouseover="document.getElementById('filtres_OFF').style.setProperty('color','lightgrey');"
				  onmouseout="document.getElementById('filtres_OFF').style.setProperty('color','grey');">
				Show Filters
		</div>
		</center>
		</td></tr></table>
	  </td>
	  <td>
	  
	  </td>
	  <td></td>
	  <td>
		<center>
		<div id="refreshSelection_rotator" >
			<img id="refeshSelection_icon" src="media/refresh.png" width="40" onClick="applyFilters();" 
			  onmouseover="document.getElementById('refeshSelection_icon').src='media/refresh_ON.png';refreshIconRotateActive=true;refreshIcon_Rotate();"
			  onmouseout="document.getElementById('refeshSelection_icon').src='media/refresh.png';refreshIconRotateActive=false;"
			  />
		</div>
		</center>
	</td>
	</tr></table>
	  </center>
	</td>

	
      </tr></table>
      </center>

  	
  </td>

  	<td><center>
  	  Current Workset
	  <table>
		<tr ><center><div id="nbSelectionIds" style="font-size:0.7em;color:white" ></div></center></tr>
		<tr ><center><div id="message_panel" style="font-size:0.7em;color:grey"></div></center></tr>
	  </table>
	</center></td>
</tr>  

<tr><td colspan=2><hr/></td></tr>
  <!-- Central Row -->
  <tr>
  

  <!-- Info Panel -->
	<td style="width:50%;vertical-align:top">
	   
  	    <table width="100%">
  	     <tr>
  	     	<td style="font-size:0.7em;" colspan=2 ><div id="quizz_switch"><input id="quizz_checkbox" type="checkbox" onChange="setQuizzMode();">Quizz</input></div></td></tr>
  	     <tr> 
		     <td style="vertical-align:top"  >
		     <center>
		     	<table><tr>
			  <td><textarea id="quizz_answer_area" cols="40" rows="5"></textarea></td>
			&nbsp;
		     	  <td><img id="quizz_showInfoPic" src="" width="75"/></td>
		     	  </tr></table>
		     	</center>
		     </td>
  	     </tr>
  	     <tr>
  	       <td width="100%">
  	        <center>
		<div id="info_panel" >
		 <table  onclick="editCSV();"  >
		  <tr>
			<th width="20%">Title</th>
			<td width="80%" style="vertical-align:top" ><i><div id="title" /></div></i></td>
		  </tr>
		  <tr>
			<th width="20%">Author</th>
			<td width="80%" style="vertical-align:top" ><i><div id="author" /></div></i></td>
		  </tr>
		  <tr>
			<th width="20%">Date</th>
			<td width="80%" style="vertical-align:top"  ><i><div id="date" /></div></i></td>
		  </tr>
		  <tr>
			<th width="20%">Museum</th>
			<td width="80%" style="vertical-align:top" ><i><div id="museum"  /></div></i></td>
		  </tr>
		      <tr>
			<th width="20%">Century</th>
			<td width="80%" style="vertical-align:top"  ><i><div id="century" /></div></i></td>
		  </tr>
		   <tr>
			<th width="20%">Origin</th>
			<td width="80%" style="vertical-align:top" ><i><div id="country"  /></div></i></td>
		  </tr>
		  <tr>
			<th width="20%">Type</th>
			<td width="80%" style="vertical-align:top" ><i><div id="type" /></div></i></td>
		  </tr>
		  <tr>
			<th width="20%">Comments</th>
			<td width="80%" style="vertical-align:top" ><i><div id="comments" /></div></i></td>
		  </tr>
		  <tr>
		  	<th width="20%">Keywords</th>
			<td width="80%" style="vertical-align:top" ><i><div id="keywords" /></div></i></td>
			
		  </tr>
		    <tr>
			<th width="20%" style="font-size:0.7em">Image</th>
			<td width="80%" style="vertical-align:top" >
				<div id="picRootPath" style="font-size:0.7em" ></div><div id="picPath" style="font-size:0.7em" ></div>
			</td>
		  </tr>
		 </table>
		</div>
		
		<div id="edit_panel" >
		  <table >
			  <tr>
				<th width="20%">Title</th>
				<td width="80%" style="vertical-align:top" ><textarea  id="title_edit" cols="30" rows="1"></textarea></td>
			  </tr>
			  <tr>
				<th width="20%">Author</th>
				<td width="80%" style="vertical-align:top" ><textarea id="author_edit"  cols="30" rows="1"></textarea></td>
			  </tr>
			  <tr>
				<th width="20%">Date</th>
				<td width="80%" style="vertical-align:top"  ><textarea id="date_edit" cols="30" rows="1"></textarea></td>
			  </tr>
			  <tr>
				<th width="20%">Museum</th>
				<td width="80%" style="vertical-align:top" ><textarea id="museum_edit"  cols="30" rows="1"></textarea></td>
			  </tr>
			  <tr>
				<th width="20%">Century</th>
				<td width="80%" style="vertical-align:top" >
					<select id="century_edit" onChange="document.getElementById('century').innerHTML = document.getElementById('century_edit').value" >
						<option value="11" >11th</option>
						<option value="12" >12th</option>
						<option value="13" >13th</option>
						<option value="14" >14th</option>
						<option value="15" >15th</option>
						<option value="16" >16th</option>
						<option value="17" >17th</option>
						<option value="18" >18th</option>
						<option value="19" >19th</option>
						<option value="other" >Autre</option>
					</select></td>
			  </tr>
			  <tr>
				<th width="20%">Origin</th>
				<td width="80%" style="vertical-align:top" >
					<select id="country_edit" onChange="document.getElementById('country').innerHTML = document.getElementById('country_edit').value" >
						<option value="france" >France</option>
						<option value="germany" >Germany</option>
						<option value="england" >England</option>
						<option value="spain" >Spain</option>
						<option value="neederlands" >Neederlands</option>
						<option value="italia" >Italy</option>
						<option value="centralEurope" >Central Europe</option>
						<option value="russia" >Russie</option>
						<option value="northernEurope" >Northern Europe</option>
						<option value="other" >Other</option>
					</select></td>
			  </tr>  
			  <tr>
				<th width="20%">Type</th>
				<td width="80%" style="vertical-align:top" >
					<select id="type_edit" onChange="document.getElementById('type').innerHTML = document.getElementById('type_edit').value" >
						<option value="painting" >Painting</option>
						<option value="sculpture" >Sculpture</option>
						<option value="archive" >Archive</option>
						<option value="book" >Book</option>
						<option value="object" >Art Object</option>
						<option value="other" DEFAULT>Other</option>
					</select></td>
			  </tr>
			  <tr>
				<th width="20%">Comments</th>
				<td width="80%" style="vertical-align:top" ><textarea id="comments_edit"  cols="30" rows="5"></textarea></td>
			  </tr>
			  <tr>
				<th width="20%">Keywords</th>
				<td width="80%" style="vertical-align:top" ><i><div id="keywords_edit" cols="30" rows="1" /></div></i></td>
				
			  </tr>
			  <tr>
				<th width="20%" style="font-size:0.7em">Image</th>
				<td width="80%" style="vertical-align:top" >
					<div id="picRootPath_edit" style="font-size:0.7em" ></div><textarea style="font-size:0.7em" id="picPath_edit" cols="60" rows="1" ></textarea>
				</td>
			  </tr>
			  <tr>
				<td><center><br/><input id="editCancel_button" type="button" value="Annuler" onClick="Next(curSelectionID);switchAppMode('STATE_DISPLAY_INFO');"></input></center></td>
				<td><center><br/><input id="editSave_button" type="button" value="Sauvegarder" onClick="updateCSV();Next(curSelectionID);switchAppMode('STATE_DISPLAY_INFO');""></center></input></td> 	
			  </tr>
		 </table>
		 </div>
		
		
		 </center>
	    </tr></td></table>
	</td>

	<!-- Picture Display Panel -->
	<td style="width:40%" id="pic_panel">
	   <center>                                                    
	  <table style="width:90%">
	   <tr>
	   	<td style="width:'65px'"><center><img id="gotoleft_pic" src="media/ArrowLeft.png" style="width:45px" onClick="Next(navHisto.pop())" 
		onmouseover="document.getElementById('gotoleft_pic').src='media/ArrowLeft_ON.png'"
		onmouseout="document.getElementById('gotoleft_pic').src='media/ArrowLeft.png'"/>	
		</center></td>
		<td style="width:'300px'"><div>
			<center>	
				<img id="pic" src="" style="border-style:none;max-width:300px;max-height:300px;box-shadow: 4px 4px 5px #101010;" onClick="Next()"  
					onmouseover="document.getElementById('pic').style.setProperty('box-shadow','0 0 5px #555555');"
					onmouseout="document.getElementById('pic').style.setProperty('box-shadow','4px 4px 5px #101010');"
					error="function(){alert('plop');}" />
				<br/><br/>
				<div id="picID" style="font-size:0.7em" ></div><br/>
				<input id="deletePic_button" type="button" value="Remove this Picture" onClick="removeCurrentItem();"
					onmouseover="document.getElementById('deletePic_button').style.setProperty('box-shadow','0 0 5px #BBBBBB');"
					onmouseout="document.getElementById('deletePic_button').style.setProperty('box-shadow','none');"> </input>
      
			</center>
			</div>
		</td>	
		<td style="width:'65px'"><center><img id="gotoright_pic" src="media/ArrowRight.png" style="width:45px" onClick="Next()"
			onmouseover="document.getElementById('gotoright_pic').src='media/ArrowRight_ON.png'"
			onmouseout="document.getElementById('gotoright_pic').src='media/ArrowRight.png'"/>
		</center></td>
	   </tr>
	  </table>
	  
	  </center>
	</td>
	
	
	<!-- Search Results Panel -->
	<td style="width:10%;vertical-align:top;" id="search_panel">
	 <center>
	 <table >
	  <td>
	  
		<tr><td style="font-size:0.7em;" ><center>Goto Line
			<input type="text"  id="goto_field" size="4"  style="font-size:0.7em;" 
				onkeypress="if (event.which==13||event.keycode==13) 
					{gotoCSVLine(document.getElementById('goto_field').value)};">
			</input></center></td>
		</tr>
		<tr><td style="font-size:0.7em;"><input id="random_checkbox" type="checkbox" onChange="setRandom();">Random Navigation</input></td></tr>
	  </td>
	  <td><center>
	  	<br/>
	  	<div id="thumbnails_area" style="width:100px;height:250px;overflow:auto;padding:5px;background-color:#404040;border:inset 2px grey"></div>
	  	<div id="thumbnails_hidden_area" style="font-size:0.7em;width:100px;height:250px;overflow:auto;padding:5px;background-color:#404040;border:inset 2px grey" >
	  		<table>
	  		    <tr><td>
	  		    	<br/>
	  		    	<center>
	  		    		<div style="color:grey;">Thumbnails Not Loaded</div><br/>
	  		    		<div style="font-size:0.7em;color:grey">Current Workset Too Big</div>
	  		    	</center>
	  		    </td></tr>
	  		    <tr><td><br/><center>
	  			<button id="thumbnails_display_button"  
	  				onclick="buildSelection();" 
	  				onmouseover="document.getElementById('thumbnails_display_button').style.setProperty('box-shadow','0 0 5px #BBBBBB');"
	  				onmouseout="document.getElementById('thumbnails_display_button').style.setProperty('box-shadow','none');">
	  				Show Anyway
	  			</button>
	  		    </center></td></tr>
	  	        </table>
	  		
	  	</div>
	  </center></td>
	 </table>
	 </center>
	</td>

  </tr>
  <tr><td colspan=2><hr/></td></tr>
  <tr><td colspan=2><center><div  style="color:grey;font-size:0.7em">© Editions <a style="color:grey;" href="mailto:editionsletilleul@yahoo.fr">Le Tilleul</a> 2015-2016</div></center></td></tr>
</table>
</center>
</div>





</body>
</html>
