

Priority 1:
-----------




#31 define and prepare deployment tests for v2.0.0
green earth : 
	- hover color is not visible
	- filter title not visible


Priority 2:
-----------

quotas check when uploading csv : refused while lines could be just update of existing items 

uploading test CSV: sometimes stoping at 2/3 items ...

FTP server 
	- stop FTP servers when app is destroyed
	- FTP server with fewer debug messages
	- FTP server "quota exceeded" message when upload refused or add dummy file "ATTENTION_QUOTA_EXCEEDED.txt" in userdata folder

Fields: multi shall be visible only if enum is not empty
when switch in/out edit mode : shall stay in current tab
when creating a second new perpective, unable to create a new field, have to reload page
Ref. fields multi yes/no is not functional (always yes even if flag is 'no')
when delete catalog failed because of Kibana, page is not refreshed while it should be
when deleting a catalog, delete also associated userdata


Terms and Conditions presentation and acceptation on first login
 
renaming a perspective actually duplicates it
search on accentuated characters imported from UTF-16 does not seem to work
#19 send email to users and admin when useful

#23 avoid use of kibana_user user once ELK issue 51759 us fixed


#14 check user inputs : ensure no special nor space characters and are not empty
	- mapping names
	- perspectives names (and sections and types)
	- entry check for community name (lower case etc.)
	- links-graph form : nodes name
	
#7 presentation page
	- sign-up form

- left-items submenus not visible when window width too small

#28 user profile picture

Backlog:
--------
- use field alias to rename fields and make lexic translation available in Kibana and searxh queries
- websocket connection lost when 'save as...' window open ?
- detect when same user logged from 2 different hosts : TO BE TESTED
- when entering edit mode, shall stay in current tab
- styling dropdowns for sorting choices
- check DB version VS app version at application startup
- design definition in Latek
- waiting icon while loading real name of link 
- when deleting a document, filters selection is cleared
- add 'show more items' icon
- when accessing Communities without valid session, a nice error msg should appear (for now only crippy JSON decoding error is seen in console)
- exporter un CSV vide prêt à remplir pour aider l'utilisateur à créer son CSV
- unable to create a new field right after creating new catalog
- when enumeration list of a term has only one element, edit mod does not detectit as enum  (dropdown) but as text (text input)
- import from Excel file
- GUI of search bar in XS version
- onclick image field : redirect to new page
- extra-mapping : field value prefix/suffix ? (like currencies)
- implement items list 'table' mode
- implement user config profile picture

- test grafana for graphics and so
- download selection as CSV or ZIP (CSV+files)
- import from Zip : CSV/Excel + files
- automated user creation and email verification
- delete rename mapping (need elastic-search re-indexing)
- packaging/deploy using Docker
	+ retrieve config params from file
- implement section 'table' mode
- check neo4j pour toile de connection
- check gephy pour visualisation de graphs
- bug : application need a full restart when setting status back to ACTIVE
	otherwise when reloading context after changing properties file:
			java.sql.SQLException: No suitable driver found for jdbc:mysql://metaindex.fr:3306/metaindex?useUnicode=true&useLegacyDatetimeCode=false&serverTimezone=UTC
Done:
-----
FTP server port increments all when creating a new catalog
waiting message when creating a catalog
filter references in edit mode : stop propagation
#20 test usage statistics emails
#17 helps texts in french and english
#30 secure access to catalog's files
	Fix double'//' in URL prefix
	unable to access local files with main user session : seems to create a second user session, invalidating the first one when logging with the second one?		

#15 adapt GUI to access rights
	w to access rights (hide forbidden actions)	
	x visible color for selected filters
	x help icons 
	x hide for read-only users :
			create new items
			upload csv
			save filter
			modify filter
			
disable 'table' from perspective section rendering types (not implemented yet)

#25 when creating a new catalog, lexic panel still have contents of previously selected catalog

#24 once chosen manually, default perspective shall be persistent

#26 don't show catalogs for which user does not have access right at all

#27 'create new item' icon shall be star

Creation date is in UTC but interpreted as local time in Kibana GUI, 
so when creazting a new object, it is not yet visible using default time filter options ('now' is 2h to early)  
-> maybe play with advanced settings, setting timezone to UTC, or default search to now+2h ?

#16 removing a term present in several perspectives, it removes it from the second perspective while user have clicked on the first perspective ones

#8 prepare demo data, catalog/user present by default
	
#6 Kibana access control to indices
      x new catalog 
      		. create index
      		. create space
      		. create index-pattern
      		. create RO and WR roles
      		      		
      x user login
      		. create user in ElasticSearch
      x user change passwd
      		. sync passwd in ElasticSearch
      x user change role
      		. update roles list (update role for each accessible catalogs) in Kibana
      x user change index access-rights
      		. update roles list in Kibana
      x create term
      		. update index pattern
      x delete catalog
      		. delete roles and space and index-pattern
      		
x when catalogs list is empty, we create a new catalog, it is not visible in web GUI

#22 import data as CSV
	remove tmp files older than 10min
x lastModif timestamp not update : dates format error
- when logged-out, userProfileData.isLoggedIn still returns true, and user can still access to secured pages (but no web-sockets)
#12 backup/restore a full catalog / scrutation of "maintenance" flag in properties		 
favicon
when logging -> forward to catalogs instead of back to welcome
	fixed also "disable apache welcome page metaindex.fr:8080"
remove unused / unavailable datatypes (#15)
#10 : ? once logged out by time-out, log-in again leads to server error in the log :
		[ERROR] 2019-11-26 22:04:37.008 [clientInboundChannel-165] WsControllerUser - Unable to register 'laurentmlcontact-metaindex@yahoo.fr' on websockets API : toolbox.exceptions.DataProcessException: No logged user found for sessionId=17D057D02C30B14A409E42CC52EE048B.
		--> solved with #9 hopefully
		
#9 need to handle session time-out callback to kick-out user from catalogs registration when timed-out or logged-out
	- log-out user when autorefresh set enabled to false
	
#13 when creating a new element, list of "sort" dropdown gets append with duplicated contents

#4 phpmyadmin through SSL
#5 Kibana SSL proxy 
- ftp-server : properly close connection when quitting


#18 consolidate FTP server files management:
    - ftp  server restarted for each relog with new ftp server --> not reproduceable

#12 Reload details from DB : When modifying some data in DB, software shall get updated without having to shutdown it :
   . catalog details
   . user details (including new one)
   
#11 upgrade to dep spring MVC 5.2.0.RELEASE
  --> Echec de la lecture du document de schéma 'http://www.springframework.org/schema/security/spring-security.xsd' pour les raisons suivantes : 1) Le document est introuvable
  --> fichiers fournis par le proxy metaindex
  
- ftp-server check quotas
- ftp-server through SSL
- put code on git-hub
- implement quotas per user : max nb of elements and max disk size

- users count increase when same user logs-in several times --> 
- ftp ports to be opened in tomcat docker container
- allonger type SQL pour stockage des perspectives
	Unable to process update_perspective from 'laurentmlcontact-metaindex@yahoo.fr' : Unable to perform SQLDb operation : Data truncation: Data too long for column 'perspective_json_string' at row 1 

- relationship between items
	- create network graphs

 - when creating a document while a 'join' field exist:
 	Item [1] : {"index":"lolo","type":"_doc","id":"WdJtEm4BlBSzXucQvAiX",
 		"cause":{"type":"exception","reason":"Elasticsearch exception [type=mapper_parsing_exception, reason=failed to parse]",
 		"caused_by":{"type":"exception","reason":"Elasticsearch exception [
 		type=illegal_argument_exception, reason=unknown join name [] for field [relation_owner]]"}},"status":400}
- create item footer message displayed twice
- popups and contextual menus animation and look&feel
- create Logo
- 'create item' popup : let user defined frozen fields with a locker button associated to each field.
- xeditable enum and multi for integers (and dates, float, etc?!)
- create item popup : does not take user 'non important' values on the first use when pressing enter instead of clicking OK button
- perspective auto activate based on corresponding field value
- when creating element : 
    - space added to string pasted?
    - if not unfocusing field, value is not updated

- when type 'arrow' in search, selected object changes ...
- when type 's' or 'e' in edit mode, the statistics panel toggle ...
- delete all items button does not appear before opening first item
- stats panel empty when logout and then login
- filters list auto-update when created or changed
- link to kibana misses the '#'
- edit image URL no possible
- when editing fields, pressing left key switch document 
- FTP access rights related to user access to catalog
- sort by Date / filter by date :
	// Kibana does not understand the timestamp field, if it's format is incorrect.Timestamp, 
	// which you selected by clicking on Time-field name when Configure an index pattern, need to be :		
		"timestamp":"2015-08-05 07:40:20.123"
		
		then you should update your index mapping like this:
		
		curl -XPUT 'http://localhost:9200/applogs/1/_mapping' -d'
		{
		  "1": {
		    "timestamp": {
		      "enabled": true,
		      "type": "date",
		      "format": "yyyy-MM-dd HH:mm:ss.SSS",
		      "store": true
		    }
		  }
		}'
- admin cannot modify contents (cannot reproduce)
- upload file(s)
- USER_ROLE depends on community_id but then unable to log-in
- implement user config (language, color-theme, picture, ...)
- clear multi-choices when clearing "new item" form popup
- add enumsList then multi -> enums list erased
- internationalization 
- in custom-perspectives : tabs change is done on all perspectives, not only the active one
- in custom-perspectives : clicking on perspective name does open/close the zone
- perspective : field name optionally displayed
- navigate to Communities and Stats from Items page
- stop propagation when editing fields values or customization
- when adding tab or section or field, GUI should keep corresponding perspective/tab selected
- when creating a new perspective, it should by default contain a tab and a section
- customizable perspective : closing when selecting tab
- in custome perspective : after deleting a tab, curTabData is null and unable to add a new section in an already remaining tab
	- when creating successively perspective and tab, error "undefined variable 'curTabData'" when creating a tab
- editable field : onkeypress/down : stop propagation
- font color of confirm buttons
- navigate with arrows
- when only one tab/section, don't display it, just the contents.
- key 'p' to switch next perspective
- implicit lastModifTimestamp and lastModifiedBy in ElasticSearch
- add default perspective
- delete community
- implement fields types and style (size and alignment)
- implement "create new item"